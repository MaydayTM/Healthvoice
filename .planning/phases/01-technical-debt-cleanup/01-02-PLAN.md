---
phase: 01-technical-debt-cleanup
plan: 02
type: execute
depends_on: ["01-01"]
files_modified: [app/(tabs)/index.tsx]
---

<objective>
Add delete confirmation dialog and clean up remaining TODO stubs.

Purpose: Prevent accidental deletion of logs and remove development artifacts.
Output: Proper delete confirmation UX with Dutch language support.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-technical-debt-cleanup/01-01-SUMMARY.md
@app/(tabs)/index.tsx
@app/(tabs)/settings.tsx

**Reference:** See settings.tsx for existing Alert.alert patterns with Dutch text (handleDeleteAccount, handleSignOut)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add delete confirmation dialog</name>
  <files>app/(tabs)/index.tsx</files>
  <action>
Update handleDelete function to show confirmation dialog before deleting:

1. Import Alert from react-native (should already be imported)
2. Replace current handleDelete with:
```typescript
const handleDelete = async (log: HealthLog) => {
  Alert.alert(
    'Log verwijderen',
    'Weet je zeker dat je deze log wilt verwijderen? Dit kan niet ongedaan worden gemaakt.',
    [
      { text: 'Annuleren', style: 'cancel' },
      {
        text: 'Verwijderen',
        style: 'destructive',
        onPress: async () => {
          await removeLog(log.id);
        },
      },
    ]
  );
};
```
3. Remove the TODO comment above the function
  </action>
  <verify>Delete button shows confirmation dialog, canceling does NOT delete, confirming deletes the log</verify>
  <done>Delete action requires explicit confirmation, follows same pattern as settings screen</done>
</task>

<task type="auto">
  <name>Task 2: Verify no remaining TODO comments in index.tsx</name>
  <files>app/(tabs)/index.tsx</files>
  <action>
1. Search for any remaining TODO comments in the file
2. If handleEdit still has a TODO comment (should be removed in 01-01), remove it
3. Verify no other TODO comments exist that should be addressed
4. If any console.log statements remain for debugging, remove them
  </action>
  <verify>grep -n "TODO" app/(tabs)/index.tsx returns no results, grep -n "console.log" returns no results</verify>
  <done>No TODO comments or debug console.log statements remain in index.tsx</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Delete confirmation dialog</what-built>
  <how-to-verify>
    1. Run: `npx expo start`
    2. Open app on device/simulator
    3. Create a test log if needed
    4. Tap the delete (trash) icon on a log item
    5. Verify: Alert dialog appears with Dutch text
    6. Tap "Annuleren"
    7. Verify: Log is NOT deleted
    8. Tap delete icon again
    9. Tap "Verwijderen"
    10. Verify: Log is removed from the list
    11. Pull to refresh
    12. Verify: Log is permanently deleted
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Delete button shows confirmation dialog
- [ ] "Annuleren" cancels deletion
- [ ] "Verwijderen" deletes the log
- [ ] No TODO comments in app/(tabs)/index.tsx
- [ ] No debug console.log statements
- [ ] `npx tsc --noEmit` passes
</verification>

<success_criteria>
- Delete confirmation implemented with Dutch text
- All TODO stubs in index.tsx resolved
- Phase 1 complete
</success_criteria>

<output>
After completion, create `.planning/phases/01-technical-debt-cleanup/01-02-SUMMARY.md` with:
- Phase 1 completion status
- All technical debt items resolved
- Ready for Phase 2 (Instant Feedback)
</output>
